{"version":3,"file":"js/about.7b6a60b5.js","mappings":"sLACOA,MAAM,S,GACTC,EAAAA,EAAAA,GAA8B,UAA1B,yBAAqB,G,GAAzBC,G,kCADFC,EAAAA,EAAAA,IAEM,MAFNC,EAEMC,E,aCFR,MAAMC,EAAS,CAAC,EAGVC,GAA2B,OAAgBD,EAAQ,CAAC,CAAC,SAASE,KAEpE,O,6ZCkBA,MAAMC,GAAUC,EAAAA,EAAAA,MACVC,GAASD,EAAAA,EAAAA,IAAI,GACbE,GAASF,EAAAA,EAAAA,IAAI,GAIbG,EAAgBA,KAClBC,QAAQC,IAAI,CAACJ,EAAOK,MAAOJ,EAAOI,QAClCC,EAAK,gBAAiB,CAACN,EAAOK,MAAOJ,EAAOI,OAAO,EAGjDE,EAAeA,KACjBT,EAAQO,MAAMG,UAAUC,OAAO,SAAS,E,0lBC/B5C,MAAMb,EAAc,EAEpB,Q,oUCgBA,MAAMc,GAAeX,EAAAA,EAAAA,MAIfY,EAAYA,KACdL,EAAK,WAAYI,EAAaL,MAAM,E,iYCvBxC,MAAM,EAAc,EAEpB,Q,27BCuCA,MAAMO,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,MACRC,GAAWjB,EAAAA,EAAAA,IAAI,CACjBkB,QAAS,CAAC,OACVC,QAAS,CAAC,OACVC,KAAM,CAAC,CAAC,OACRC,gBAAgB,IAGpBjB,QAAQC,IAAIQ,EAAMS,OAAOC,IAEzB,MAAMC,GAAiBxB,EAAAA,EAAAA,MACjByB,EAAcZ,EAAMS,OAAOC,GAC3BG,EAAOX,EAAMY,QAAQC,aAErBC,GAAW7B,EAAAA,EAAAA,IAAI,IACrB,IAAI8B,EAEJ,MAAMC,GAAM/B,EAAAA,EAAAA,IAAI,IACVgC,GAAahC,EAAAA,EAAAA,IAAI,IACvB,IAAIiC,EAAQ,GACRC,EAAY,IAEhBC,EAAAA,EAAAA,KAAU,KAENJ,EAAIzB,MAAQ,GACZ2B,EAAQ,GAaRH,EAAWM,aAAY,KACL,MAAXV,EAAKH,IACJc,cAAcP,GACXJ,EAAKH,IAAME,IACVK,EAAWM,aAAY,KACnBE,EAAY,CACRC,KAAM,OACNnB,KAAMoB,KAAKC,UAAUxB,EAAUX,QACjC,GACH,OAEPF,QAAQC,IAAI,MAChB,GACD,KAMH,IAAIqC,EAAqB,GAAGC,MAAMC,KAAKC,SAASC,iBAAiB,4BAEjEJ,EAAmBK,KAAI,SAAUC,GAC7B,IAAIC,EAcJ,OAbAD,EAAiBE,aAAe,KAC5B,IAAIC,EAAOH,EAAiBI,wBAC5BH,EAAKJ,SAASQ,cAAc,OAE5BJ,EAAGK,UAAY,oCACfL,EAAGM,MAAS,mEAAkEJ,EAAKK,gBAAgBL,EAAKM,YACxGR,EAAGS,UAAa,8IAA6IV,EAAiBW,QAAQC,gBACtLf,SAASgB,KAAKC,OAAOb,EAAG,EAG5BD,EAAiBe,aAAe,KAC5Bd,EAAGvC,QAAQ,EAERuC,CACX,GAAE,IAKN,MAAMe,EAAaC,IACD,MAAXvC,EAAKH,IAGE,IAAP0C,QAAoBC,GAAPD,IAIhBpC,EAASvB,MAAQ2D,EAEjBE,EAAU3B,KAAKC,UAAU,CACrBlB,GAAIE,EACJI,SAAU,QACX,EAGDuC,EAAwBH,IACvBvC,EAAKH,IAAME,EAKdR,EAAUX,MAAMe,eAAiB4C,EAJ7BI,MAAM,QAI0B,EAGlCC,EAAQC,IACVjC,EAAY,CACRC,KAAM,OACNnB,KAAMmD,GACR,EAGAC,EAAkBpD,IAUpB,GAPAhB,QAAQC,IAAIe,GACTA,EAAK,GAAK,IACTA,EAAK,GAAK,GAEXA,EAAK,GAAK,IACTA,EAAK,GAAK,GAEXH,EAAUX,MAAMY,QAAQuD,OAASrD,EAAK,GAAG,CACxC,IAAIsD,EAAYzD,EAAUX,MAAMY,QAAQuD,OACxC,IAAI,IAAIE,EAAID,EAAYC,EAAIvD,EAAK,GAAKuD,IAAI,CACtC1D,EAAUX,MAAMY,QAAQ0D,KAAK,OAE7B,IAAIC,EAAU,GACd,IAAI,IAAIC,EAAI,EAAIA,EAAI1D,EAAK,GAAK0D,IAC1BD,EAAQD,KAAK,IAEjB3D,EAAUX,MAAMc,KAAKwD,KAAKpC,KAAKuC,MAAMvC,KAAKC,UAAUoC,IACxD,CAEJ,MACI5D,EAAUX,MAAMY,QAAUD,EAAUX,MAAMY,QAAQyB,MAAM,EAAGvB,EAAK,IAChEH,EAAUX,MAAMc,KAAOH,EAAUX,MAAMc,KAAKuB,MAAM,EAAGvB,EAAK,IAI9D,GAAGH,EAAUX,MAAMa,QAAQsD,OAASrD,EAAK,GAAG,CACxC,IAAI4D,EAAY/D,EAAUX,MAAMa,QAAQsD,OACxC,IAAI,IAAIE,EAAIK,EAAYL,EAAIvD,EAAK,GAAKuD,IAAI,CACtC1D,EAAUX,MAAMa,QAAQyD,KAAK,OAE7B,IAAI,IAAIE,EAAI,EAAIA,EAAI7D,EAAUX,MAAMc,KAAKqD,OAASK,IAC9C7D,EAAUX,MAAMc,KAAK0D,GAAGF,KAAK,GACrC,CAGJ,KAAK,CACD3D,EAAUX,MAAMa,QAAUF,EAAUX,MAAMa,QAAQwB,MAAM,EAAGvB,EAAK,IAChE,IAAI,IAAI0D,EAAI,EAAIA,EAAI7D,EAAUX,MAAMc,KAAKqD,OAASK,IAC9C7D,EAAUX,MAAMc,KAAK0D,GAAK7D,EAAUX,MAAMc,KAAK0D,GAAGnC,MAAM,EAAGvB,EAAK,GACxE,CACAhB,QAAQC,IAAIY,EAAUX,MAAMc,KAAK,EAS/B6D,EAAaA,CAACV,EAAKW,EAAKC,KAC1BA,EAAEC,kBAES,GAARb,IACCtD,EAAUX,MAAMa,QAAQ+D,GAAOC,EAAEE,OAAOC,YAAYC,QAAQ,OAAQ,MAE7D,GAARL,IACCjE,EAAUX,MAAMY,QAAQqD,GAAOY,EAAEE,OAAOC,YAAYC,QAAQ,OAAQ,MAE7D,GAARhB,IAAqB,GAARW,IACZjE,EAAUX,MAAMc,KAAKmD,GAAKW,GAAOC,EAAEE,OAAOC,YAAYC,QAAQ,OAAQ,IAAG,EA8EjF,SAASpB,EAAU/C,GAEf,IAAIoE,EAAIhD,KAAKuC,MAAM3D,GACfG,EAAKiE,EAAE,MACPC,EAAiBD,EAAE,YAEvB,GAAGzD,EAAIzB,MAAMoF,SAASnE,GAClB,OAEJnB,QAAQC,IAAIkB,GACZQ,EAAIzB,MAAMsE,KAAKrD,GAEf,IAAIoE,EAAU,CACVpE,GAAIA,EACJM,SAAU4D,GAEdzD,EAAW1B,MAAMsE,KAAKpC,KAAKuC,MAAMvC,KAAKC,UAAUkD,KAChD,IAAIC,EAAOlE,EAAKmE,QAAQtE,GACxBqE,EAAKE,GAAG,QAAQ,WAEZ,IAAIC,EAAY,CACZ,KAAQ,OACR,KAAQvD,KAAKC,UAAU,CACnBlB,GAAIG,EAAKH,GACTM,SAAUA,EAASvB,SAG3BsF,EAAKI,KAAKxD,KAAKC,UAAUsD,IAEzB9D,EAAM2C,KAAKgB,EACf,GAEJ,CAGA,SAAStD,EAAYlB,GAEjBhB,QAAQC,IAAIe,GACZA,EAAOoB,KAAKC,UAAUrB,GAEtBa,EAAMgE,SAASL,IAEXA,EAAKI,KAAK5E,EAAK,GAIvB,C,OApHA8E,EAAAA,EAAAA,IAAMjF,EAAUX,OAAQ2D,IACpB3B,EAAY,CACRC,KAAM,OACNnB,KAAMoB,KAAKC,UAAUwB,IACvB,IAINvC,EAAKoE,GAAG,cAAc,SAASF,GAE3BA,EAAKE,GAAG,QAAQ,SAAS1E,GAGrB,OAFAA,EAAOoB,KAAKuC,MAAM3D,GAEXA,EAAK,SACR,IAAK,OACD+C,EAAU/C,EAAK,SACf,MAEJ,IAAK,OACD,GAAGM,EAAKH,IAAME,EACV,MAEJR,EAAUX,MAAQkC,KAAKuC,MAAM3D,EAAK,SAElC,MAEJ,IAAK,OACD,GAAqC,GAAlCH,EAAUX,MAAMe,eACf,MAGJ,IAAI8E,EAAe,GAMnB,IAAI,IAAIrB,EAAI,EAAIA,EAAI9C,EAAW1B,MAAMmE,OAASK,IAC1C,GAAG9C,EAAW1B,MAAMwE,GAAGvD,IAAMqE,EAAKlE,KAAK,CACnCyE,EAAenE,EAAW1B,MAAMwE,GAAGjD,SACnC,KACJ,CAGJ,GAAGK,EAAUwD,SAASE,EAAKlE,MACvB,MAEJ,IAAI6C,EAAM6B,SAAShF,EAAK,SAExB,IAAI,IAAI0D,EAAI,EAAIA,EAAI7D,EAAUX,MAAMa,QAAQsD,OAASK,IACjD,GAAmC,IAAhC7D,EAAUX,MAAMc,KAAKmD,GAAKO,GAAS,CAClC7D,EAAUX,MAAMc,KAAKmD,GAAKO,GAAKqB,EAC/BjE,EAAU0C,KAAKgB,EAAKlE,MACpB,KACJ,CAIJ,MAEJ,QACI,MAIZ,GAEJ,I,6iDCnSA,MAAM,EAAc,EAEpB,O","sources":["webpack://draw_topic/./src/views/AboutView.vue","webpack://draw_topic/./src/views/AboutView.vue?d56f","webpack://draw_topic/./src/components/sideBar.vue","webpack://draw_topic/./src/components/sideBar.vue?a498","webpack://draw_topic/./src/components/enterNameWindow.vue","webpack://draw_topic/./src/components/enterNameWindow.vue?f658","webpack://draw_topic/./src/views/RoomView.vue","webpack://draw_topic/./src/views/RoomView.vue?c793"],"sourcesContent":["<template>\n  <div class=\"about\">\n    <h1>This is an about page</h1>\n  </div>\n</template>\n","import { render } from \"./AboutView.vue?vue&type=template&id=48dedea6\"\nconst script = {}\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n\r\n    <div class=\"sidebar\" ref=\"sidebar\">\r\n        <div class=\"sidebarBackfround\" @click=\"closeSideBar\"></div>\r\n        <div class=\"settingContainer\">\r\n            <div class=\"setting col-10 col-md-4 col-sm-8\">\r\n                <div style=\"text-align: right; padding: 0 1rem;\">\r\n                    <span class=\"closeSidebarButton\" @click=\"closeSideBar\">×</span>\r\n                </div>\r\n                <hr style=\"margin: 0;\">\r\n                <div class=\"content\">\r\n                    <span>列數:</span><input type=\"number\" v-model=\"rowNum\" min=\"1\" @input=\"changeSetting\">\r\n                    <span>行數:</span><input type=\"number\" v-model=\"colNum\" min=\"1\" @input=\"changeSetting\">\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineEmits } from 'vue';\r\n\r\nconst sidebar = ref()\r\nconst rowNum = ref(1);\r\nconst colNum = ref(1);\r\n\r\nconst emit = defineEmits(['changeSetting']);\r\n\r\nconst changeSetting = ()=>{\r\n    console.log([rowNum.value, colNum.value]);\r\n    emit('changeSetting', [rowNum.value, colNum.value]);\r\n}\r\n\r\nconst closeSideBar = ()=>{\r\n    sidebar.value.classList.remove(\"active\");\r\n}\r\n</script>\r\n\r\n<style>\r\n.sidebar{\r\n    position: fixed;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 10;\r\n    transition: 0.3s;\r\n    visibility: hidden;\r\n}\r\n\r\n.sidebar.active{\r\n    visibility: visible;\r\n}\r\n\r\n.sidebar .sidebarBackfround{\r\n    position: absolute;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    left: 0;\r\n    top: 0;\r\n    backdrop-filter: blur(2px);\r\n    z-index: -1;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    transition: 0.3s;\r\n}\r\n\r\n.sidebar.active .sidebarBackfround{\r\n    opacity: 1;\r\n    visibility: visible;\r\n}\r\n\r\n.sidebar .settingContainer{\r\n    filter: drop-shadow(0 0 2px #CCC);\r\n}\r\n\r\n.sidebar .setting{\r\n    position: absolute;\r\n    right: -100%;\r\n    margin: 1rem;\r\n    border-radius: 8px;\r\n    background-color: white;\r\n    height: calc(100vh - 2rem);\r\n    transition: 0.3s ease-in-out;\r\n    /* width: 500px; */\r\n}\r\n\r\n.sidebar.sidebar.active .setting{\r\n    right: 0;\r\n}\r\n\r\n.sidebar .closeSidebarButton{\r\n    cursor: pointer;\r\n    font-size: 2rem;\r\n}\r\n\r\n.sidebar .content{\r\n    display: grid;\r\n    grid-template-columns: 5rem 1fr;\r\n    padding: 0.5rem;\r\n}\r\n\r\n</style>","import script from \"./sideBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sideBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./sideBar.vue?vue&type=style&index=0&id=0e01b119&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\r\n    <div>\r\n        <div class=\"enterNameWindowBackground\"></div>\r\n\r\n        <div class=\"enterNameWindow col-12 col-md-6 col-sm-8\">\r\n\r\n            <div class=\"title\">請輸入名稱</div>\r\n            <hr>\r\n            <div class=\"input-group\" style=\"margin-top: 1rem;\">\r\n                <input class=\"username form-control\" v-model=\"inputElement\" placeholder=\"請輸入名稱\">\r\n                <customButton style=\"--bor:0 4px 4px 0\" @click=\"enterRoom\">{{ inputElement==''?'請輸入名稱':'加入房間' }}</customButton>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineEmits } from 'vue';\r\nimport customButton from './customButton.vue';\r\n\r\nconst inputElement = ref();\r\n\r\nconst emit = defineEmits(['username']);\r\n\r\nconst enterRoom = ()=>{\r\n    emit('username', inputElement.value);\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.enterNameWindowBackground{\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    backdrop-filter: blur(2px);\r\n    width: 100vw;\r\n    height: 100vh;\r\n    /* z-index: -1; */\r\n}\r\n\r\n.enterNameWindow{\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n\r\n    border-radius: 16px;\r\n    background-color: #FFF;\r\n    padding: 1rem 2rem;\r\n    max-width: 90vw;\r\n    margin: auto;\r\n}\r\n\r\n.title{\r\n    font-size: 1.5rem;\r\n    font-weight: bold;\r\n}\r\n\r\n.enterNameWindow input{\r\n    border: none;\r\n    background-color: #EEE;\r\n    font-size: 1rem;\r\n    border-radius: 8px;\r\n    padding: 0.5rem 1rem;\r\n}\r\n\r\ninput.username{\r\n    border-radius: 4px 0 0 4px;\r\n}\r\n\r\n.enterNameWindow input:focus{\r\n    /* outline: 2px solid rgb(255, 200, 100); */\r\n    outline: none\r\n}\r\n</style>","import script from \"./enterNameWindow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./enterNameWindow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./enterNameWindow.vue?vue&type=style&index=0&id=5b21dbd7&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"container\">\r\n        <div>\r\n            <span style=\"color: green; display: flex; justify-content: center; font-size: 1.2rem;\" v-show=\"tableData.drawAuthSwitch\"><i class=\"material-icons\">check</i> 目前可搶籤</span>\r\n            <span style=\"color: red; display: flex; justify-content: center; font-size: 1.2rem;\" v-show=\"!tableData.drawAuthSwitch\"><i class=\"material-icons\">not_interested</i> 目前不可搶籤</span>\r\n        </div>\r\n        <div class=\"tableContainer table-responsive mt-1\">\r\n            <table class=\"table table-bordered\">\r\n                <thead class=\"table-light\">\r\n                    <tr>\r\n                        <th>項目</th>\r\n                        <th v-for=\"(item, index) in tableData.colName\" :key=\"index\" role=\"textbox\" @input=\"e => dataChange(-1, index, e)\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ item }}</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(item, index) in tableData.rowName\" :key=\"index\">\r\n                        <td :class=\"`table-light ${peer.id != roomOwnerId?'drawButton':''}`\" @click=\"draw(index)\" role=\"textbox\" @input=\"e => dataChange(index, -1, e)\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ item }}</td>\r\n                        <td v-for=\"(d, colIndex) in tableData.data[index]\" :key=\"colIndex\" @input=\"event => dataChange(index, colIndex, event)\" role=\"textbox\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ d }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n\r\n    <sideBar ref=\"sideBarElement\" @change-setting=\"settingChanged\"></sideBar>\r\n\r\n    <span class=\"functions\">\r\n        <span>\r\n            <span><i class=\"material-icons\" onclick=\"document.querySelector('.sidebar').classList.add('active');\">settings</i></span>\r\n            <span class=\"peopleButton\" :data-num=\"ids.length\"><i class=\"material-icons\">people</i></span>\r\n            <span data-toggle=\"tooltip\" data-tooltip=\"允許填寫!\" @click=\"drawAuthSwitchChange(true)\"><i class=\"material-icons\">check</i></span>\r\n            <span data-toggle=\"tooltip\" data-tooltip=\"關閉填寫!\" @click=\"drawAuthSwitchChange(false)\"><i class=\"material-icons\">not_interested</i></span>\r\n        </span>\r\n    </span>\r\n\r\n    <enterNameWindow v-show=\"peer.id != roomOwnerId && username == ''\" @username=\"enterName\"></enterNameWindow>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, watch } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport sideBar from '@/components/sideBar.vue';\r\nimport enterNameWindow from '@/components/enterNameWindow.vue';\r\n\r\nconst route = useRoute();\r\nconst store = useStore();\r\nconst tableData =ref({\r\n    rowName: [\"項目1\"],\r\n    colName: [\"名額1\"],\r\n    data: [[\"AA\"]],\r\n    drawAuthSwitch: true,\r\n})\r\n\r\nconsole.log(route.params.id);\r\n\r\nconst sideBarElement = ref();\r\nconst roomOwnerId = route.params.id;\r\nconst peer = store.getters.getPeerjsObj;\r\n// const drawAuthSwitch = ref(true);\r\nconst username = ref('');\r\nlet interval;\r\n\r\nconst ids = ref([]);\r\nconst idAndNames = ref([]);\r\nvar conns = [];\r\nvar haveFiled = [];\r\n\r\nonMounted(()=>{\r\n\r\n    ids.value = [];\r\n    conns = [];\r\n\r\n    // setTimeout(()=>{\r\n    //     console.log(peer.id);\r\n    // }, 5000)\r\n\r\n    // setInterval(() => {\r\n    //     console.log(store.getters.getPeerjsObj.id);\r\n    //     console.log(ids);\r\n    //     console.log(conns);\r\n\r\n    // }, 5000);\r\n\r\n    interval = setInterval(() => {\r\n        if(peer.id != null){\r\n            clearInterval(interval);\r\n            if(peer.id == roomOwnerId)\r\n                interval = setInterval(() => {\r\n                    sendMessage({\r\n                        type: 'text',\r\n                        data: JSON.stringify(tableData.value)\r\n                    })\r\n                }, 1000);\r\n        }else{\r\n            console.log(\"not\");\r\n        }\r\n    }, 1000);\r\n    \r\n    // setInterval(() => {\r\n    //     console.log(tableData.value.data);\r\n    // }, 2000);\r\n\r\n    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-toggle=\"tooltip\"]'))\r\n    // var bodyRect = document.body.getBoundingClientRect()\r\n    tooltipTriggerList.map(function (tooltipTriggerEl) {\r\n        let el;\r\n        tooltipTriggerEl.onmouseenter = ()=>{\r\n            let rect = tooltipTriggerEl.getBoundingClientRect();\r\n            el = document.createElement(\"div\");\r\n            // console.log(window.screen.height)\r\n            el.className = \"tooltip bs-tooltip-auto fade show\";\r\n            el.style = `position: absolute; inset: auto auto 0px 0px; margin: 0px; left:${rect.left}px; top: ${rect.bottom}px;`;\r\n            el.innerHTML = `<div class=\"tooltip-arrow\" style=\"position: absolute; left: 0px; transform: translate3d(28px, 0px, 0px);\"></div><div class=\"tooltip-inner\">${tooltipTriggerEl.dataset.tooltip}</div>`\r\n            document.body.append(el);\r\n        }\r\n\r\n        tooltipTriggerEl.onmouseleave = ()=>{\r\n            el.remove();\r\n        }\r\n        return el\r\n    })\r\n\r\n\r\n})\r\n\r\nconst enterName = (val)=>{\r\n    if(peer.id == null)\r\n        return;\r\n\r\n    if(val == '' || val == undefined)\r\n        return;\r\n\r\n    // console.log(val);\r\n    username.value = val;\r\n    // conn2Peer(roomOwnerId);\r\n    conn2Peer(JSON.stringify({\r\n        id: roomOwnerId,\r\n        username: '房主'\r\n    }));\r\n}\r\n\r\nconst drawAuthSwitchChange = (val)=>{\r\n    if(peer.id != roomOwnerId){\r\n        alert(\"您不是房主\");\r\n        return;\r\n    }\r\n\r\n    tableData.value.drawAuthSwitch = val;\r\n}\r\n\r\nconst draw = (row)=>{\r\n    sendMessage({\r\n        type: 'draw',\r\n        data: row\r\n    })\r\n}\r\n\r\nconst settingChanged = (data)=>{\r\n    // data[0]: rowNum\r\n    // data[1]: colNum\r\n    console.log(data)\r\n    if(data[0] < 1)\r\n        data[0] = 1;\r\n\r\n    if(data[1] < 1)\r\n        data[1] = 1;\r\n    // row 改變\r\n    if(tableData.value.rowName.length < data[0]){\r\n        let nowRowNum = tableData.value.rowName.length;\r\n        for(let j = nowRowNum ; j < data[0] ; j++){\r\n            tableData.value.rowName.push('新項目');\r\n\r\n            let tempArr = []\r\n            for(let i = 0 ; i < data[1] ; i++)\r\n                tempArr.push('');\r\n            \r\n            tableData.value.data.push(JSON.parse(JSON.stringify(tempArr)));\r\n        }\r\n\r\n    }else{\r\n        tableData.value.rowName = tableData.value.rowName.slice(0, data[0]);\r\n        tableData.value.data = tableData.value.data.slice(0, data[0]);\r\n    }\r\n\r\n    // col 改變\r\n    if(tableData.value.colName.length < data[1]){\r\n        let nowColNum = tableData.value.colName.length;\r\n        for(let j = nowColNum ; j < data[1] ; j++){\r\n            tableData.value.colName.push('新名額');\r\n\r\n            for(let i = 0 ; i < tableData.value.data.length ; i++)\r\n                tableData.value.data[i].push('');\r\n        }\r\n\r\n\r\n    }else{\r\n        tableData.value.colName = tableData.value.colName.slice(0, data[1]);\r\n        for(let i = 0 ; i < tableData.value.data.length ; i++)\r\n            tableData.value.data[i] = tableData.value.data[i].slice(0, data[1]);\r\n    }\r\n    console.log(tableData.value.data);\r\n\r\n    // sendMessage({\r\n    //     type: \"text\",\r\n    //     data: JSON.stringify(tableData.value)\r\n    // })\r\n\r\n}\r\n\r\nconst dataChange = (row, col, e)=>{\r\n    e.preventDefault();\r\n    // console.log(e.target.textContent);\r\n    if(row == -1)\r\n        tableData.value.colName[col] = e.target.textContent.replace(/\\n/gi, \"\");\r\n\r\n    if(col == -1)\r\n        tableData.value.rowName[row] = e.target.textContent.replace(/\\n/gi, \"\");\r\n        \r\n    if(row != -1 && col != -1)\r\n        tableData.value.data[row][col] = e.target.textContent.replace(/\\n/gi, \"\");\r\n\r\n    // sendMessage({\r\n    //     type: \"text\",\r\n    //     data: JSON.stringify(tableData.value)\r\n    // })\r\n}\r\n\r\nwatch(tableData.value, (val)=>{\r\n    sendMessage({\r\n        type: \"text\",\r\n        data: JSON.stringify(val)\r\n    })\r\n\r\n})\r\n\r\npeer.on('connection', function(conn) {\r\n\r\n    conn.on('data', function(data){\r\n        data = JSON.parse(data);\r\n        // console.log(data);\r\n        switch(data['type']){\r\n            case 'conn':\r\n                conn2Peer(data['data']);\r\n                break;\r\n\r\n            case 'text':\r\n                if(peer.id == roomOwnerId)\r\n                    break;\r\n\r\n                tableData.value = JSON.parse(data['data']);\r\n                // console.log(data['data'])\r\n                break;\r\n\r\n            case 'draw':\r\n                if(tableData.value.drawAuthSwitch == false)\r\n                    break;\r\n\r\n                // console.log(conn.peer);\r\n                var drawUsername = '';\r\n                // var drawUsername = idAndNames.map((item)=>{\r\n                //     if(item.id == peer.id)\r\n                //         return item.username;\r\n                // })\r\n                // console.log(drawUsername)\r\n                for(let i = 0 ; i < idAndNames.value.length ; i++){\r\n                    if(idAndNames.value[i].id == conn.peer){\r\n                        drawUsername = idAndNames.value[i].username;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if(haveFiled.includes(conn.peer))\r\n                    break;\r\n\r\n                var row = parseInt(data['data']);\r\n\r\n                for(let i = 0 ; i < tableData.value.colName.length ; i++){\r\n                    if(tableData.value.data[row][i] == ''){\r\n                        tableData.value.data[row][i] = drawUsername;\r\n                        haveFiled.push(conn.peer);\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n\r\n                break;\r\n\r\n            default:\r\n                break;\r\n\r\n        }\r\n        \r\n    });\r\n\r\n});\r\n\r\n//連接\r\nfunction conn2Peer(data){\r\n\r\n    let d = JSON.parse(data);\r\n    let id = d['id'];\r\n    let targetUsername = d['username'];\r\n\r\n    if(ids.value.includes(id))\r\n        return;\r\n\r\n    console.log(id);\r\n    ids.value.push(id);\r\n    // store.dispatch('addId', {id: id});\r\n    let tempObj = {\r\n        id: id,\r\n        username: targetUsername\r\n    }\r\n    idAndNames.value.push(JSON.parse(JSON.stringify(tempObj)))\r\n    var conn = peer.connect(id);\r\n    conn.on('open', function(){\r\n\r\n        let allIdData = {\r\n            \"type\": \"conn\",\r\n            \"data\": JSON.stringify({\r\n                id: peer.id,\r\n                username: username.value\r\n            })\r\n        }\r\n        conn.send(JSON.stringify(allIdData));\r\n\r\n        conns.push(conn);\r\n    });\r\n\r\n}\r\n\r\n//傳資料\r\nfunction sendMessage(data){\r\n\r\n    console.log(data)\r\n    data = JSON.stringify(data);\r\n\r\n    conns.forEach((conn)=>{\r\n\r\n        conn.send(data);\r\n\r\n    });\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.container{\r\n    margin-top: 1rem;\r\n}\r\n\r\n.tableContainer{\r\n    filter: drop-shadow(0 0 2px #DDD);\r\n    border-radius: 16px;\r\n\r\n}\r\n\r\n.table{\r\n    position: relative;\r\n    /* left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%); */\r\n    /* width: 100%; */\r\n    max-height: 60vh;\r\n    /* max-width: 90vw; */\r\n    /* display: flex; */\r\n    /* flex-direction: row; */\r\n    /* margin: auto; */\r\n    /* justify-content: center; */\r\n    /* background: #FFF; */\r\n    /* padding: 1.5rem; */\r\n    /* overflow: scroll; */\r\n    /* width: fit-content; */\r\n}\r\n/* \r\n.table div{\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.table div span{\r\n    display: block;\r\n    height: 1.5rem;\r\n    line-height: 1.5rem;\r\n} */\r\n\r\ntable td, table th{\r\n    white-space: nowrap;\r\n    word-break: keep-all;\r\n}\r\n\r\ntable input{\r\n    outline: none;\r\n}\r\n\r\ntable .drawButton{\r\n    cursor: pointer;\r\n    transition: 0.2s;\r\n}\r\n\r\ntable .drawButton:hover{\r\n    /* cursor: pointer; */\r\n    outline: 4px solid rgba(255, 150, 100, 1);\r\n}\r\n\r\n.functions{\r\n    position: fixed;\r\n    bottom: 10%;\r\n    left: 50%;\r\n    transform: translate(-50%, 0);\r\n    filter: drop-shadow(0 0 2px #DDD);\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    background: #FFF;\r\n    border-radius: 99999px;\r\n}\r\n\r\n.functions > span{\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    /* background: #FFF; */\r\n    padding: 0.5rem;\r\n    border-radius: 99999px;\r\n    height: 3rem;\r\n    line-height: 3rem;\r\n\r\n}\r\n\r\n.functions > span > span{\r\n    display: block;\r\n    /* padding: 0.5rem 1rem; */\r\n    border-radius: 50%;\r\n    /* background: #DDD; */\r\n    width: 36px;\r\n    height: 36px;\r\n    line-height: 36px;\r\n    margin: 0 4px;\r\n    transition: 0.2s;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n\r\n.functions > span > span:hover, .functions > span > span.active{\r\n    background: rgb(255, 210, 50);\r\n}\r\n\r\n.functions > span > span > i{\r\n    line-height: 36px;\r\n}\r\n\r\n.functions .peopleButton{\r\n    position: relative;\r\n}\r\n\r\n.functions .peopleButton::before{\r\n    content: attr(data-num);\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 10;\r\n    font-size: 0.6rem;\r\n    display: block;\r\n    line-height: 1.6rem;\r\n}\r\n\r\n\r\n</style>","import script from \"./RoomView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RoomView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RoomView.vue?vue&type=style&index=0&id=43c352fa&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","_hoisted_3","script","__exports__","render","sidebar","ref","rowNum","colNum","changeSetting","console","log","value","emit","closeSideBar","classList","remove","inputElement","enterRoom","route","useRoute","store","useStore","tableData","rowName","colName","data","drawAuthSwitch","params","id","sideBarElement","roomOwnerId","peer","getters","getPeerjsObj","username","interval","ids","idAndNames","conns","haveFiled","onMounted","setInterval","clearInterval","sendMessage","type","JSON","stringify","tooltipTriggerList","slice","call","document","querySelectorAll","map","tooltipTriggerEl","el","onmouseenter","rect","getBoundingClientRect","createElement","className","style","left","bottom","innerHTML","dataset","tooltip","body","append","onmouseleave","enterName","val","undefined","conn2Peer","drawAuthSwitchChange","alert","draw","row","settingChanged","length","nowRowNum","j","push","tempArr","i","parse","nowColNum","dataChange","col","e","preventDefault","target","textContent","replace","d","targetUsername","includes","tempObj","conn","connect","on","allIdData","send","forEach","watch","drawUsername","parseInt"],"sourceRoot":""}