"use strict";(self["webpackChunkdraw_topic"]=self["webpackChunkdraw_topic"]||[]).push([[443],{833:function(e,a,t){t.r(a),t.d(a,{default:function(){return d}});var l=t(3396);const n={class:"about"},s=(0,l._)("h1",null,"This is an about page",-1),i=[s];function o(e,a){return(0,l.wg)(),(0,l.iD)("div",n,i)}var r=t(89);const u={},c=(0,r.Z)(u,[["render",o]]);var d=c},5739:function(e,a,t){t.r(a),t.d(a,{default:function(){return le}});t(7658);var l=t(3396),n=t(9242),s=t(4870),i=t(7139),o=t(2483),r=t(65);const u={class:"memberList"},c=(0,l._)("i",{class:"material-icons"},"account_circle",-1);var d={__name:"memberList",props:{membersdata:{type:Array}},setup(e){const a=e;return(e,t)=>((0,l.wg)(),(0,l.iD)("ul",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.membersdata,((e,a)=>((0,l.wg)(),(0,l.iD)("li",{class:"listItem",key:a},[c,(0,l._)("span",null,(0,i.zw)(e.username),1)])))),128))]))}};const v=d;var p=v;const m={class:"settingContainer"},g={class:"setting col-10 col-md-4 col-sm-8"},b={class:"switcher"},_=(0,l._)("hr",{style:{margin:"0 4px"}},null,-1),f={class:"content"},h=["hidden"],w=(0,l._)("span",null,"列數:",-1),y=(0,l._)("span",null,"行數:",-1),k=["hidden"];var S={__name:"sideBar",props:{membersdata:{type:Array}},emits:["changeSetting"],setup(e,{expose:a,emit:t}){const o=e,r=(0,s.iH)(),u=(0,s.iH)(1),c=(0,s.iH)(1),d=(0,s.iH)(),v=(0,s.iH)(),S=(0,s.iH)(0),N=()=>{console.log([u.value,c.value]),t("changeSetting",[u.value,c.value])},x=()=>{r.value.classList.remove("active")},C=e=>{S.value=e};return a({changeTab:C}),(e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"sidebar",ref_key:"sidebar",ref:r},[(0,l._)("div",{class:"sidebarBackfround",onClick:x}),(0,l._)("div",m,[(0,l._)("div",g,[(0,l._)("div",{style:{"text-align":"right",padding:"0 1rem"}},[(0,l._)("span",{class:"closeSidebarButton",onClick:x},"×")]),(0,l._)("div",b,[(0,l._)("span",{class:(0,i.C_)(0==S.value?"active":""),onClick:a[0]||(a[0]=e=>C(0))},"設定",2),(0,l._)("span",{class:(0,i.C_)(1==S.value?"active":""),onClick:a[1]||(a[1]=e=>C(1))},"成員",2)]),_,(0,l._)("div",f,[(0,l._)("section",{class:"settingTab",ref_key:"settingTab",ref:d,hidden:0==!S.value},[w,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),min:"1",onInput:N},null,544),[[n.nr,u.value]]),y,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),min:"1",onInput:N},null,544),[[n.nr,c.value]])],8,h),(0,l._)("section",{class:"memberTab",ref_key:"memberTab",ref:v,hidden:1==!S.value},[(0,l.Wm)(p,{membersdata:o.membersdata},null,8,["membersdata"])],8,k)])])])],512))}};const N=S;var x=N,C=t(7585);const H=(0,l._)("div",{class:"enterNameWindowBackground"},null,-1),O={class:"enterNameWindow col-12 col-md-6 col-sm-8"},U=(0,l._)("div",{class:"title"},"請輸入名稱",-1),J=(0,l._)("hr",null,null,-1),D={class:"input-group",style:{"margin-top":"1rem"}};var I={__name:"enterNameWindow",emits:["username"],setup(e,{emit:a}){const t=(0,s.iH)(""),i=(0,s.iH)("請輸入名稱"),o=()=>{i.value=""==t.value?"請輸入名稱":"加入房間"},r=()=>{""!=t.value&&(a("username",t.value),i.value='<span class="spinner-border spinner-border-sm" style="font-size: 0.6rem"></span>')};return(e,a)=>((0,l.wg)(),(0,l.iD)("div",null,[H,(0,l._)("div",O,[U,J,(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{class:"username form-control","onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),onInput:o,placeholder:"請輸入名稱"},null,544),[[n.nr,t.value]]),(0,l.Wm)(C.Z,{style:{"--bor":"0 4px 4px 0"},onClick:r,innerHTML:i.value},null,8,["innerHTML"])])])]))}};const T=I;var L=T;const A={class:"container"},B={style:{color:"green",display:"flex","justify-content":"center","font-size":"1.2rem"}},z=(0,l._)("i",{class:"material-icons"},"check",-1),W={style:{color:"red",display:"flex","justify-content":"center","font-size":"1.2rem"}},Y=(0,l._)("i",{class:"material-icons"},"not_interested",-1),j={class:"tableContainer table-responsive mt-1"},K={class:"table table-bordered"},V={class:"table-light"},q=(0,l._)("th",null,"項目",-1),E=["onInput","contenteditable"],F=["onClick","onInput","contenteditable"],M=["onInput","contenteditable"],R={class:"functions"},$=["data-num"],P=(0,l._)("i",{class:"material-icons"},"people",-1),Z=[P],G=(0,l._)("i",{class:"material-icons"},"check",-1),Q=[G],X=(0,l._)("i",{class:"material-icons"},"not_interested",-1),ee=[X];var ae={__name:"RoomView",setup(e){const a=(0,o.yj)(),t=(0,r.oR)(),u=(0,s.iH)({rowName:["項目1"],colName:["名額1"],data:[[""]],drawAuthSwitch:!0});console.log(a.params.id);const c=(0,s.iH)(),d=a.params.id,v=t.getters.getPeerjsObj,p=(0,s.iH)(""),m=(0,s.iH)(!1);let g;const b=(0,s.iH)([]),_=(0,s.iH)([]);var f=[],h=[];(0,l.bv)((()=>{b.value=[],f=[],g=setInterval((()=>{null!=v.id?(clearInterval(g),v.id==d&&(g=setInterval((()=>{H({type:"text",data:JSON.stringify(u.value)}),H({type:"usersList",data:JSON.stringify(_.value)})}),1e3))):console.log("not")}),1e3);var e=[].slice.call(document.querySelectorAll('[data-toggle="tooltip"]'));e.map((function(e){let a;return e.onmouseenter=()=>{let t=e.getBoundingClientRect();a=document.createElement("div"),a.className="tooltip bs-tooltip-auto fade show",a.style=`position: absolute; inset: auto auto 0px 0px; margin: 0px; left:${t.left}px; top: ${t.bottom}px;`,a.innerHTML=`<div class="tooltip-arrow" style="position: absolute; left: 0px; transform: translate3d(28px, 0px, 0px);"></div><div class="tooltip-inner">${e.dataset.tooltip}</div>`,document.body.append(a)},e.onmouseleave=()=>{a.remove()},a}))}));const w=e=>{null!=v.id&&""!=e&&void 0!=e&&(p.value=e,C(JSON.stringify({id:d,username:"房主"})))},y=e=>{v.id==d?u.value.drawAuthSwitch=e:alert("您不是房主")},k=e=>{H({type:"draw",data:e})},S=e=>{if(console.log(e),e[0]<1&&(e[0]=1),e[1]<1&&(e[1]=1),u.value.rowName.length<e[0]){let a=u.value.rowName.length;for(let t=a;t<e[0];t++){u.value.rowName.push("新項目");let a=[];for(let t=0;t<e[1];t++)a.push("");u.value.data.push(JSON.parse(JSON.stringify(a)))}}else u.value.rowName=u.value.rowName.slice(0,e[0]),u.value.data=u.value.data.slice(0,e[0]);if(u.value.colName.length<e[1]){let a=u.value.colName.length;for(let t=a;t<e[1];t++){u.value.colName.push("新名額");for(let e=0;e<u.value.data.length;e++)u.value.data[e].push("")}}else{u.value.colName=u.value.colName.slice(0,e[1]);for(let a=0;a<u.value.data.length;a++)u.value.data[a]=u.value.data[a].slice(0,e[1])}console.log(u.value.data)},N=(e,a,t)=>{t.preventDefault(),-1==e&&(u.value.colName[a]=t.target.textContent.replace(/\n/gi,"")),-1==a&&(u.value.rowName[e]=t.target.textContent.replace(/\n/gi,"")),-1!=e&&-1!=a&&(u.value.data[e][a]=t.target.textContent.replace(/\n/gi,""))};function C(e){let a=JSON.parse(e),t=a["id"],l=a["username"];if(b.value.includes(t))return;console.log(t),b.value.push(t);let n={id:t,username:l};_.value.push(JSON.parse(JSON.stringify(n)));var s=v.connect(t);s.on("open",(function(){let e={type:"conn",data:JSON.stringify({id:v.id,username:p.value})};s.send(JSON.stringify(e)),f.push(s)}))}function H(e){console.log(e),e=JSON.stringify(e),f.forEach((a=>{a.send(e)}))}return(0,l.YP)(u.value,(e=>{H({type:"text",data:JSON.stringify(e)})})),v.on("connection",(function(e){e.on("data",(function(a){switch(a=JSON.parse(a),a["type"]){case"conn":e.peer==d&&(m.value=!0),C(a["data"]);break;case"text":if(v.id==d)break;u.value=JSON.parse(a["data"]);break;case"draw":if(0==u.value.drawAuthSwitch)break;var t="";for(let a=0;a<_.value.length;a++)if(_.value[a].id==e.peer){t=_.value[a].username;break}if(h.includes(e.peer))break;var l=parseInt(a["data"]);for(let a=0;a<u.value.colName.length;a++)if(""==u.value.data[l][a]){u.value.data[l][a]=t,h.push(e.peer);break}break;case"usersList":if(v.id==d)break;_.value=JSON.parse(a["data"]);break;default:break}}))})),(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",A,[(0,l._)("div",null,[(0,l.wy)((0,l._)("span",B,[z,(0,l.Uk)(" 目前可搶籤")],512),[[n.F8,u.value.drawAuthSwitch]]),(0,l.wy)((0,l._)("span",W,[Y,(0,l.Uk)(" 目前不可搶籤")],512),[[n.F8,!u.value.drawAuthSwitch]])]),(0,l._)("div",j,[(0,l._)("table",K,[(0,l._)("thead",V,[(0,l._)("tr",null,[q,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.colName,((e,a)=>((0,l.wg)(),(0,l.iD)("th",{key:a,role:"textbox",onInput:e=>N(-1,a,e),contenteditable:(0,s.SU)(v).id==(0,s.SU)(d)},(0,i.zw)(e),41,E)))),128))])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.rowName,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",{class:(0,i.C_)("table-light "+((0,s.SU)(v).id!=(0,s.SU)(d)?"drawButton":"")),onClick:e=>k(a),role:"textbox",onInput:e=>N(a,-1,e),contenteditable:(0,s.SU)(v).id==(0,s.SU)(d)},(0,i.zw)(e),43,F),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.data[a],((e,t)=>((0,l.wg)(),(0,l.iD)("td",{key:t,onInput:e=>N(a,t,e),role:"textbox",contenteditable:(0,s.SU)(v).id==(0,s.SU)(d)},(0,i.zw)(e),41,M)))),128))])))),128))])])])]),(0,l.Wm)(x,{ref_key:"sideBarElement",ref:c,onChangeSetting:S,membersdata:_.value},null,8,["membersdata"]),(0,l._)("span",R,[(0,l._)("span",null,[(0,l._)("span",null,[(0,l._)("i",{class:"material-icons",onClick:a[0]||(a[0]=e=>c.value.changeTab(0)),onclick:"document.querySelector('.sidebar').classList.add('active');"},"settings")]),(0,l._)("span",{class:"peopleButton",onClick:a[1]||(a[1]=e=>c.value.changeTab(1)),onclick:"document.querySelector('.sidebar').classList.add('active');","data-num":_.value.length},Z,8,$),(0,l._)("span",{"data-toggle":"tooltip","data-tooltip":"允許填寫!",onClick:a[2]||(a[2]=e=>y(!0))},Q),(0,l._)("span",{"data-toggle":"tooltip","data-tooltip":"關閉填寫!",onClick:a[3]||(a[3]=e=>y(!1))},ee)])]),(0,l.wy)((0,l.Wm)(L,{onUsername:w},null,512),[[n.F8,(0,s.SU)(v).id!=(0,s.SU)(d)&&!m.value]])],64))}};const te=ae;var le=te}}]);
//# sourceMappingURL=about.bf6ff227.js.map