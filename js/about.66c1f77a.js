"use strict";(self["webpackChunkdraw_topic"]=self["webpackChunkdraw_topic"]||[]).push([[443],{833:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=a(3396);const n={class:"about"},o=(0,l._)("h1",null,"This is an about page",-1),i=[o];function s(e,t){return(0,l.wg)(),(0,l.iD)("div",n,i)}var r=a(89);const u={},c=(0,r.Z)(u,[["render",s]]);var d=c},2938:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});a(7658);var l=a(3396),n=a(9242),o=a(4870),i=a(7139),s=a(2483),r=a(65);const u={class:"settingContainer"},c={class:"setting col-10 col-md-4 col-sm-8"},d=(0,l._)("hr",{style:{margin:"0"}},null,-1),p={class:"content"},v=(0,l._)("span",null,"列數:",-1),m=(0,l._)("span",null,"行數:",-1);var g={__name:"sideBar",emits:["changeSetting"],setup(e,{emit:t}){const a=(0,o.iH)(),i=(0,o.iH)(1),s=(0,o.iH)(1),r=()=>{console.log([i.value,s.value]),t("changeSetting",[i.value,s.value])},g=()=>{a.value.classList.remove("active")};return(e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"sidebar",ref_key:"sidebar",ref:a},[(0,l._)("div",{class:"sidebarBackfround",onClick:g}),(0,l._)("div",u,[(0,l._)("div",c,[(0,l._)("div",{style:{"text-align":"right",padding:"0 1rem"}},[(0,l._)("span",{class:"closeSidebarButton",onClick:g},"×")]),d,(0,l._)("div",p,[v,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),min:"1",onInput:r},null,544),[[n.nr,i.value]]),m,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),min:"1",onInput:r},null,544),[[n.nr,s.value]])])])])],512))}};const f=g;var _=f,w=a(7585);const b=(0,l._)("div",{class:"enterNameWindowBackground"},null,-1),h={class:"enterNameWindow col-12 col-md-6 col-sm-8"},y=(0,l._)("div",{class:"title"},"請輸入名稱",-1),N=(0,l._)("hr",null,null,-1),S={class:"input-group",style:{"margin-top":"1rem"}};var k={__name:"enterNameWindow",emits:["username"],setup(e,{emit:t}){const a=(0,o.iH)(""),i=(0,o.iH)("請輸入名稱"),s=()=>{i.value=""==a.value?"請輸入名稱":"加入房間"},r=()=>{""!=a.value&&(t("username",a.value),i.value='<span class="spinner-border spinner-border-sm" style="font-size: 0.6rem"></span>')};return(e,t)=>((0,l.wg)(),(0,l.iD)("div",null,[b,(0,l._)("div",h,[y,N,(0,l._)("div",S,[(0,l.wy)((0,l._)("input",{class:"username form-control","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onInput:s,placeholder:"請輸入名稱"},null,544),[[n.nr,a.value]]),(0,l.Wm)(w.Z,{style:{"--bor":"0 4px 4px 0"},onClick:r,innerHTML:i.value},null,8,["innerHTML"])])])]))}};const x=k;var H=x;const C={class:"container"},O={style:{color:"green",display:"flex","justify-content":"center","font-size":"1.2rem"}},U=(0,l._)("i",{class:"material-icons"},"check",-1),J={style:{color:"red",display:"flex","justify-content":"center","font-size":"1.2rem"}},I=(0,l._)("i",{class:"material-icons"},"not_interested",-1),D={class:"tableContainer table-responsive mt-1"},B={class:"table table-bordered"},L={class:"table-light"},z=(0,l._)("th",null,"項目",-1),A=["onInput","contenteditable"],W=["onClick","onInput","contenteditable"],j=["onInput","contenteditable"],Y={class:"functions"},T=(0,l._)("span",null,[(0,l._)("i",{class:"material-icons",onclick:"document.querySelector('.sidebar').classList.add('active');"},"settings")],-1),V=["data-num"],E=(0,l._)("i",{class:"material-icons"},"people",-1),F=[E],K=(0,l._)("i",{class:"material-icons"},"check",-1),M=[K],R=(0,l._)("i",{class:"material-icons"},"not_interested",-1),$=[R];var q={__name:"RoomView",setup(e){const t=(0,s.yj)(),a=(0,r.oR)(),u=(0,o.iH)({rowName:["項目1"],colName:["名額1"],data:[[""]],drawAuthSwitch:!0});console.log(t.params.id);const c=(0,o.iH)(),d=t.params.id,p=a.getters.getPeerjsObj,v=(0,o.iH)(""),m=(0,o.iH)(!1);let g;const f=(0,o.iH)([]),w=(0,o.iH)([]);var b=[],h=[];(0,l.bv)((()=>{f.value=[],b=[],g=setInterval((()=>{null!=p.id?(clearInterval(g),p.id==d&&(g=setInterval((()=>{K({type:"text",data:JSON.stringify(u.value)}),K({type:"usersList",data:JSON.stringify(w.value)})}),1e3))):console.log("not")}),1e3);var e=[].slice.call(document.querySelectorAll('[data-toggle="tooltip"]'));e.map((function(e){let t;return e.onmouseenter=()=>{let a=e.getBoundingClientRect();t=document.createElement("div"),t.className="tooltip bs-tooltip-auto fade show",t.style=`position: absolute; inset: auto auto 0px 0px; margin: 0px; left:${a.left}px; top: ${a.bottom}px;`,t.innerHTML=`<div class="tooltip-arrow" style="position: absolute; left: 0px; transform: translate3d(28px, 0px, 0px);"></div><div class="tooltip-inner">${e.dataset.tooltip}</div>`,document.body.append(t)},e.onmouseleave=()=>{t.remove()},t}))}));const y=e=>{null!=p.id&&""!=e&&void 0!=e&&(v.value=e,E(JSON.stringify({id:d,username:"房主"})))},N=e=>{p.id==d?u.value.drawAuthSwitch=e:alert("您不是房主")},S=e=>{K({type:"draw",data:e})},k=e=>{if(console.log(e),e[0]<1&&(e[0]=1),e[1]<1&&(e[1]=1),u.value.rowName.length<e[0]){let t=u.value.rowName.length;for(let a=t;a<e[0];a++){u.value.rowName.push("新項目");let t=[];for(let a=0;a<e[1];a++)t.push("");u.value.data.push(JSON.parse(JSON.stringify(t)))}}else u.value.rowName=u.value.rowName.slice(0,e[0]),u.value.data=u.value.data.slice(0,e[0]);if(u.value.colName.length<e[1]){let t=u.value.colName.length;for(let a=t;a<e[1];a++){u.value.colName.push("新名額");for(let e=0;e<u.value.data.length;e++)u.value.data[e].push("")}}else{u.value.colName=u.value.colName.slice(0,e[1]);for(let t=0;t<u.value.data.length;t++)u.value.data[t]=u.value.data[t].slice(0,e[1])}console.log(u.value.data)},x=(e,t,a)=>{a.preventDefault(),-1==e&&(u.value.colName[t]=a.target.textContent.replace(/\n/gi,"")),-1==t&&(u.value.rowName[e]=a.target.textContent.replace(/\n/gi,"")),-1!=e&&-1!=t&&(u.value.data[e][t]=a.target.textContent.replace(/\n/gi,""))};function E(e){let t=JSON.parse(e),a=t["id"],l=t["username"];if(f.value.includes(a))return;console.log(a),f.value.push(a);let n={id:a,username:l};w.value.push(JSON.parse(JSON.stringify(n)));var o=p.connect(a);o.on("open",(function(){let e={type:"conn",data:JSON.stringify({id:p.id,username:v.value})};o.send(JSON.stringify(e)),b.push(o)}))}function K(e){console.log(e),e=JSON.stringify(e),b.forEach((t=>{t.send(e)}))}return(0,l.YP)(u.value,(e=>{K({type:"text",data:JSON.stringify(e)})})),p.on("connection",(function(e){e.on("data",(function(t){switch(t=JSON.parse(t),t["type"]){case"conn":e.peer==d&&(m.value=!0),E(t["data"]);break;case"text":if(p.id==d)break;u.value=JSON.parse(t["data"]);break;case"draw":if(0==u.value.drawAuthSwitch)break;var a="";for(let t=0;t<w.value.length;t++)if(w.value[t].id==e.peer){a=w.value[t].username;break}if(h.includes(e.peer))break;var l=parseInt(t["data"]);for(let t=0;t<u.value.colName.length;t++)if(""==u.value.data[l][t]){u.value.data[l][t]=a,h.push(e.peer);break}break;case"usersList":if(p.id==d)break;w.value=JSON.parse(t["data"]);break;default:break}}))})),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",C,[(0,l._)("div",null,[(0,l.wy)((0,l._)("span",O,[U,(0,l.Uk)(" 目前可搶籤")],512),[[n.F8,u.value.drawAuthSwitch]]),(0,l.wy)((0,l._)("span",J,[I,(0,l.Uk)(" 目前不可搶籤")],512),[[n.F8,!u.value.drawAuthSwitch]])]),(0,l._)("div",D,[(0,l._)("table",B,[(0,l._)("thead",L,[(0,l._)("tr",null,[z,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.colName,((e,t)=>((0,l.wg)(),(0,l.iD)("th",{key:t,role:"textbox",onInput:e=>x(-1,t,e),contenteditable:(0,o.SU)(p).id==(0,o.SU)(d)},(0,i.zw)(e),41,A)))),128))])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.rowName,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",{class:(0,i.C_)("table-light "+((0,o.SU)(p).id!=(0,o.SU)(d)?"drawButton":"")),onClick:e=>S(t),role:"textbox",onInput:e=>x(t,-1,e),contenteditable:(0,o.SU)(p).id==(0,o.SU)(d)},(0,i.zw)(e),43,W),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.value.data[t],((e,a)=>((0,l.wg)(),(0,l.iD)("td",{key:a,onInput:e=>x(t,a,e),role:"textbox",contenteditable:(0,o.SU)(p).id==(0,o.SU)(d)},(0,i.zw)(e),41,j)))),128))])))),128))])])])]),(0,l.Wm)(_,{ref_key:"sideBarElement",ref:c,onChangeSetting:k},null,512),(0,l._)("span",Y,[(0,l._)("span",null,[T,(0,l._)("span",{class:"peopleButton","data-num":w.value.length},F,8,V),(0,l._)("span",{"data-toggle":"tooltip","data-tooltip":"允許填寫!",onClick:t[0]||(t[0]=e=>N(!0))},M),(0,l._)("span",{"data-toggle":"tooltip","data-tooltip":"關閉填寫!",onClick:t[1]||(t[1]=e=>N(!1))},$)])]),(0,l.wy)((0,l.Wm)(H,{onUsername:y},null,512),[[n.F8,(0,o.SU)(p).id!=(0,o.SU)(d)&&!m.value]])],64))}};const P=q;var Z=P}}]);
//# sourceMappingURL=about.66c1f77a.js.map