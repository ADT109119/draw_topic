{"version":3,"file":"js/about.66c1f77a.js","mappings":"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","sources":["webpack://draw_topic/./src/views/AboutView.vue","webpack://draw_topic/./src/views/AboutView.vue?d56f","webpack://draw_topic/./src/components/sideBar.vue","webpack://draw_topic/./src/components/sideBar.vue?a498","webpack://draw_topic/./src/components/enterNameWindow.vue","webpack://draw_topic/./src/components/enterNameWindow.vue?f658","webpack://draw_topic/./src/views/RoomView.vue","webpack://draw_topic/./src/views/RoomView.vue?c793"],"sourcesContent":["<template>\n  <div class=\"about\">\n    <h1>This is an about page</h1>\n  </div>\n</template>\n","import { render } from \"./AboutView.vue?vue&type=template&id=48dedea6\"\nconst script = {}\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\n    <div class=\"sidebar\" ref=\"sidebar\">\n        <div class=\"sidebarBackfround\" @click=\"closeSideBar\"></div>\n        <div class=\"settingContainer\">\n            <div class=\"setting col-10 col-md-4 col-sm-8\">\n                <div style=\"text-align: right; padding: 0 1rem;\">\n                    <span class=\"closeSidebarButton\" @click=\"closeSideBar\">×</span>\n                </div>\n                <hr style=\"margin: 0;\">\n                <div class=\"content\">\n                    <span>列數:</span><input type=\"number\" v-model=\"rowNum\" min=\"1\" @input=\"changeSetting\">\n                    <span>行數:</span><input type=\"number\" v-model=\"colNum\" min=\"1\" @input=\"changeSetting\">\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script setup>\nimport { ref, defineEmits } from 'vue';\n\nconst sidebar = ref()\nconst rowNum = ref(1);\nconst colNum = ref(1);\n\nconst emit = defineEmits(['changeSetting']);\n\nconst changeSetting = ()=>{\n    console.log([rowNum.value, colNum.value]);\n    emit('changeSetting', [rowNum.value, colNum.value]);\n}\n\nconst closeSideBar = ()=>{\n    sidebar.value.classList.remove(\"active\");\n}\n</script>\n\n<style>\n.sidebar{\n    position: fixed;\n    height: 100vh;\n    width: 100vw;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    transition: 0.3s;\n    visibility: hidden;\n}\n\n.sidebar.active{\n    visibility: visible;\n}\n\n.sidebar .sidebarBackfround{\n    position: absolute;\n    height: 100vh;\n    width: 100vw;\n    background-color: rgba(0, 0, 0, 0.1);\n    left: 0;\n    top: 0;\n    backdrop-filter: blur(2px);\n    z-index: -1;\n    opacity: 0;\n    visibility: hidden;\n    transition: 0.3s;\n}\n\n.sidebar.active .sidebarBackfround{\n    opacity: 1;\n    visibility: visible;\n}\n\n.sidebar .settingContainer{\n    filter: drop-shadow(0 0 2px #CCC);\n}\n\n.sidebar .setting{\n    position: absolute;\n    right: -100%;\n    margin: 1rem;\n    border-radius: 8px;\n    background-color: white;\n    height: calc(100vh - 2rem);\n    transition: 0.3s ease-in-out;\n    /* width: 500px; */\n}\n\n.sidebar.sidebar.active .setting{\n    right: 0;\n}\n\n.sidebar .closeSidebarButton{\n    cursor: pointer;\n    font-size: 2rem;\n}\n\n.sidebar .content{\n    display: grid;\n    grid-template-columns: 5rem 1fr;\n    padding: 0.5rem;\n}\n\n</style>","import script from \"./sideBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sideBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./sideBar.vue?vue&type=style&index=0&id=0e01b119&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n\n    <div>\n        <div class=\"enterNameWindowBackground\"></div>\n\n        <div class=\"enterNameWindow col-12 col-md-6 col-sm-8\">\n\n            <div class=\"title\">請輸入名稱</div>\n            <hr>\n            <div class=\"input-group\" style=\"margin-top: 1rem;\">\n                <input class=\"username form-control\" v-model=\"inputElement\" @input=\"changeButtonContent\" placeholder=\"請輸入名稱\">\n                <customButton style=\"--bor:0 4px 4px 0\" @click=\"enterRoom\" v-html=\"buttonContent\"></customButton>\n            </div>\n        </div>\n\n    </div>\n\n</template>\n\n<script setup>\nimport { ref, defineEmits } from 'vue';\nimport customButton from './customButton.vue';\n\nconst inputElement = ref('');\nconst buttonContent = ref('請輸入名稱');\n\n// buttonContent.value.className = \"spinner-border\";\n\nconst changeButtonContent = ()=>{\n    buttonContent.value = inputElement.value==''?\"請輸入名稱\":\"加入房間\"\n}\n\nconst emit = defineEmits(['username']);\n\nconst enterRoom = ()=>{\n    if(inputElement.value == '')\n        return;\n        \n    emit('username', inputElement.value);\n    buttonContent.value = '<span class=\"spinner-border spinner-border-sm\" style=\"font-size: 0.6rem\"></span>';\n}\n\n</script>\n\n<style>\n\n.enterNameWindowBackground{\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background-color: rgba(0, 0, 0, 0.1);\n    backdrop-filter: blur(2px);\n    width: 100vw;\n    height: 100vh;\n    /* z-index: -1; */\n}\n\n.enterNameWindow{\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n\n    border-radius: 16px;\n    background-color: #FFF;\n    padding: 1rem 2rem;\n    max-width: 90vw;\n    margin: auto;\n}\n\n.title{\n    font-size: 1.5rem;\n    font-weight: bold;\n}\n\n.enterNameWindow input{\n    border: none;\n    background-color: #EEE;\n    font-size: 1rem;\n    border-radius: 8px;\n    padding: 0.5rem 1rem;\n}\n\ninput.username{\n    border-radius: 4px 0 0 4px;\n}\n\n.enterNameWindow input:focus{\n    /* outline: 2px solid rgb(255, 200, 100); */\n    outline: none\n}\n</style>","import script from \"./enterNameWindow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./enterNameWindow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./enterNameWindow.vue?vue&type=style&index=0&id=c6a002ca&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <div class=\"container\">\n        <div>\n            <span style=\"color: green; display: flex; justify-content: center; font-size: 1.2rem;\" v-show=\"tableData.drawAuthSwitch\"><i class=\"material-icons\">check</i> 目前可搶籤</span>\n            <span style=\"color: red; display: flex; justify-content: center; font-size: 1.2rem;\" v-show=\"!tableData.drawAuthSwitch\"><i class=\"material-icons\">not_interested</i> 目前不可搶籤</span>\n        </div>\n        <div class=\"tableContainer table-responsive mt-1\">\n            <table class=\"table table-bordered\">\n                <thead class=\"table-light\">\n                    <tr>\n                        <th>項目</th>\n                        <th v-for=\"(item, index) in tableData.colName\" :key=\"index\" role=\"textbox\" @input=\"e => dataChange(-1, index, e)\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ item }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"(item, index) in tableData.rowName\" :key=\"index\">\n                        <td :class=\"`table-light ${peer.id != roomOwnerId?'drawButton':''}`\" @click=\"draw(index)\" role=\"textbox\" @input=\"e => dataChange(index, -1, e)\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ item }}</td>\n                        <td v-for=\"(d, colIndex) in tableData.data[index]\" :key=\"colIndex\" @input=\"event => dataChange(index, colIndex, event)\" role=\"textbox\" :contenteditable=\"peer.id != roomOwnerId?false:true\">{{ d }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <sideBar ref=\"sideBarElement\" @change-setting=\"settingChanged\"></sideBar>\n\n    <span class=\"functions\">\n        <span>\n            <span><i class=\"material-icons\" onclick=\"document.querySelector('.sidebar').classList.add('active');\">settings</i></span>\n            <span class=\"peopleButton\" :data-num=\"idAndNames.length\"><i class=\"material-icons\">people</i></span>\n            <span data-toggle=\"tooltip\" data-tooltip=\"允許填寫!\" @click=\"drawAuthSwitchChange(true)\"><i class=\"material-icons\">check</i></span>\n            <span data-toggle=\"tooltip\" data-tooltip=\"關閉填寫!\" @click=\"drawAuthSwitchChange(false)\"><i class=\"material-icons\">not_interested</i></span>\n        </span>\n    </span>\n\n    <enterNameWindow v-show=\"peer.id != roomOwnerId && !roomOwnerConnectBack\" @username=\"enterName\"></enterNameWindow>\n\n</template>\n\n<script setup>\nimport { onMounted, ref, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport sideBar from '@/components/sideBar.vue';\nimport enterNameWindow from '@/components/enterNameWindow.vue';\n\nconst route = useRoute();\nconst store = useStore();\nconst tableData =ref({\n    rowName: [\"項目1\"],\n    colName: [\"名額1\"],\n    data: [[\"\"]],\n    drawAuthSwitch: true,\n})\n\nconsole.log(route.params.id);\n\nconst sideBarElement = ref();\nconst roomOwnerId = route.params.id;\nconst peer = store.getters.getPeerjsObj;\n// const drawAuthSwitch = ref(true);\nconst username = ref('');\nconst roomOwnerConnectBack = ref(false);\nlet interval;\n\nconst ids = ref([]);\nconst idAndNames = ref([]);\nvar conns = [];\nvar haveFiled = [];\n\nonMounted(()=>{\n\n    ids.value = [];\n    conns = [];\n\n    // setTimeout(()=>{\n    //     console.log(peer.id);\n    // }, 5000)\n\n    // setInterval(() => {\n    //     console.log(store.getters.getPeerjsObj.id);\n    //     console.log(ids);\n    //     console.log(conns);\n\n    // }, 5000);\n\n    interval = setInterval(() => {\n        if(peer.id != null){\n            clearInterval(interval);\n            if(peer.id == roomOwnerId)\n                interval = setInterval(() => {\n                    sendMessage({\n                        type: 'text',\n                        data: JSON.stringify(tableData.value)\n                    })\n\n                    sendMessage({\n                        type: 'usersList',\n                        data: JSON.stringify(idAndNames.value)\n                    })\n                }, 1000);\n        }else{\n            console.log(\"not\");\n        }\n    }, 1000);\n    \n    // setInterval(() => {\n    //     console.log(tableData.value.data);\n    // }, 2000);\n\n    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-toggle=\"tooltip\"]'))\n    // var bodyRect = document.body.getBoundingClientRect()\n    tooltipTriggerList.map(function (tooltipTriggerEl) {\n        let el;\n        tooltipTriggerEl.onmouseenter = ()=>{\n            let rect = tooltipTriggerEl.getBoundingClientRect();\n            el = document.createElement(\"div\");\n            // console.log(window.screen.height)\n            el.className = \"tooltip bs-tooltip-auto fade show\";\n            el.style = `position: absolute; inset: auto auto 0px 0px; margin: 0px; left:${rect.left}px; top: ${rect.bottom}px;`;\n            el.innerHTML = `<div class=\"tooltip-arrow\" style=\"position: absolute; left: 0px; transform: translate3d(28px, 0px, 0px);\"></div><div class=\"tooltip-inner\">${tooltipTriggerEl.dataset.tooltip}</div>`\n            document.body.append(el);\n        }\n\n        tooltipTriggerEl.onmouseleave = ()=>{\n            el.remove();\n        }\n        return el\n    })\n\n\n})\n\nconst enterName = (val)=>{\n    if(peer.id == null)\n        return;\n\n    if(val == '' || val == undefined)\n        return;\n\n    // console.log(val);\n    username.value = val;\n    // conn2Peer(roomOwnerId);\n    conn2Peer(JSON.stringify({\n        id: roomOwnerId,\n        username: '房主'\n    }));\n}\n\nconst drawAuthSwitchChange = (val)=>{\n    if(peer.id != roomOwnerId){\n        alert(\"您不是房主\");\n        return;\n    }\n\n    tableData.value.drawAuthSwitch = val;\n}\n\nconst draw = (row)=>{\n    sendMessage({\n        type: 'draw',\n        data: row\n    })\n}\n\nconst settingChanged = (data)=>{\n    // data[0]: rowNum\n    // data[1]: colNum\n    console.log(data)\n    if(data[0] < 1)\n        data[0] = 1;\n\n    if(data[1] < 1)\n        data[1] = 1;\n    // row 改變\n    if(tableData.value.rowName.length < data[0]){\n        let nowRowNum = tableData.value.rowName.length;\n        for(let j = nowRowNum ; j < data[0] ; j++){\n            tableData.value.rowName.push('新項目');\n\n            let tempArr = []\n            for(let i = 0 ; i < data[1] ; i++)\n                tempArr.push('');\n            \n            tableData.value.data.push(JSON.parse(JSON.stringify(tempArr)));\n        }\n\n    }else{\n        tableData.value.rowName = tableData.value.rowName.slice(0, data[0]);\n        tableData.value.data = tableData.value.data.slice(0, data[0]);\n    }\n\n    // col 改變\n    if(tableData.value.colName.length < data[1]){\n        let nowColNum = tableData.value.colName.length;\n        for(let j = nowColNum ; j < data[1] ; j++){\n            tableData.value.colName.push('新名額');\n\n            for(let i = 0 ; i < tableData.value.data.length ; i++)\n                tableData.value.data[i].push('');\n        }\n\n\n    }else{\n        tableData.value.colName = tableData.value.colName.slice(0, data[1]);\n        for(let i = 0 ; i < tableData.value.data.length ; i++)\n            tableData.value.data[i] = tableData.value.data[i].slice(0, data[1]);\n    }\n    console.log(tableData.value.data);\n\n    // sendMessage({\n    //     type: \"text\",\n    //     data: JSON.stringify(tableData.value)\n    // })\n\n}\n\nconst dataChange = (row, col, e)=>{\n    e.preventDefault();\n    // console.log(e.target.textContent);\n    if(row == -1)\n        tableData.value.colName[col] = e.target.textContent.replace(/\\n/gi, \"\");\n\n    if(col == -1)\n        tableData.value.rowName[row] = e.target.textContent.replace(/\\n/gi, \"\");\n        \n    if(row != -1 && col != -1)\n        tableData.value.data[row][col] = e.target.textContent.replace(/\\n/gi, \"\");\n\n    // sendMessage({\n    //     type: \"text\",\n    //     data: JSON.stringify(tableData.value)\n    // })\n}\n\nwatch(tableData.value, (val)=>{\n    sendMessage({\n        type: \"text\",\n        data: JSON.stringify(val)\n    })\n\n})\n\npeer.on('connection', function(conn) {\n\n    conn.on('data', function(data){\n        data = JSON.parse(data);\n        // console.log(data);\n        switch(data['type']){\n            case 'conn':\n                if(conn.peer == roomOwnerId)\n                    roomOwnerConnectBack.value = true;\n\n                conn2Peer(data['data']);\n                break;\n\n            case 'text':\n                if(peer.id == roomOwnerId)\n                    break;\n\n                tableData.value = JSON.parse(data['data']);\n                // console.log(data['data'])\n                break;\n\n            case 'draw':\n                if(tableData.value.drawAuthSwitch == false)\n                    break;\n\n                // console.log(conn.peer);\n                var drawUsername = '';\n                // var drawUsername = idAndNames.map((item)=>{\n                //     if(item.id == peer.id)\n                //         return item.username;\n                // })\n                // console.log(drawUsername)\n                for(let i = 0 ; i < idAndNames.value.length ; i++){\n                    if(idAndNames.value[i].id == conn.peer){\n                        drawUsername = idAndNames.value[i].username;\n                        break;\n                    }\n                }\n\n                if(haveFiled.includes(conn.peer))\n                    break;\n\n                var row = parseInt(data['data']);\n\n                for(let i = 0 ; i < tableData.value.colName.length ; i++){\n                    if(tableData.value.data[row][i] == ''){\n                        tableData.value.data[row][i] = drawUsername;\n                        haveFiled.push(conn.peer);\n                        break;\n                    }\n                }\n                \n\n                break;\n\n            case 'usersList':\n                if(peer.id == roomOwnerId)\n                    break;\n\n                idAndNames.value = JSON.parse(data['data']);\n                // console.log(data['data'])\n                break;\n\n\n            default:\n                break;\n\n        }\n        \n    });\n\n});\n\n//連接\nfunction conn2Peer(data){\n\n    let d = JSON.parse(data);\n    let id = d['id'];\n    let targetUsername = d['username'];\n\n    if(ids.value.includes(id))\n        return;\n\n    console.log(id);\n    ids.value.push(id);\n    // store.dispatch('addId', {id: id});\n    let tempObj = {\n        id: id,\n        username: targetUsername\n    }\n    idAndNames.value.push(JSON.parse(JSON.stringify(tempObj)))\n    var conn = peer.connect(id);\n    conn.on('open', function(){\n\n        let allIdData = {\n            \"type\": \"conn\",\n            \"data\": JSON.stringify({\n                id: peer.id,\n                username: username.value\n            })\n        }\n        conn.send(JSON.stringify(allIdData));\n\n        conns.push(conn);\n    });\n\n}\n\n//傳資料\nfunction sendMessage(data){\n\n    console.log(data)\n    data = JSON.stringify(data);\n\n    conns.forEach((conn)=>{\n\n        conn.send(data);\n\n    });\n\n}\n\n</script>\n\n<style>\n\n.container{\n    margin-top: 1rem;\n    padding-bottom: 15%;\n}\n\n.tableContainer{\n    filter: drop-shadow(0 0 2px #DDD);\n    border-radius: 16px;\n\n}\n\n.table{\n    position: relative;\n    /* left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n    /* width: 100%; */\n    max-height: 60vh;\n    /* max-width: 90vw; */\n    /* display: flex; */\n    /* flex-direction: row; */\n    /* margin: auto; */\n    /* justify-content: center; */\n    /* background: #FFF; */\n    /* padding: 1.5rem; */\n    /* overflow: scroll; */\n    /* width: fit-content; */\n}\n/* \n.table div{\n    display: flex;\n    flex-direction: column;\n}\n\n.table div span{\n    display: block;\n    height: 1.5rem;\n    line-height: 1.5rem;\n} */\n\ntable td, table th{\n    white-space: nowrap;\n    word-break: keep-all;\n}\n\ntable input{\n    outline: none;\n}\n\ntable .drawButton{\n    cursor: pointer;\n    transition: 0.2s;\n}\n\ntable .drawButton:hover{\n    /* cursor: pointer; */\n    outline: 4px solid rgba(255, 150, 100, 1);\n}\n\n.functions{\n    position: fixed;\n    bottom: 10%;\n    left: 50%;\n    transform: translate(-50%, 0);\n    filter: drop-shadow(0 0 2px #DDD);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    background: #FFF;\n    border-radius: 99999px;\n}\n\n.functions > span{\n    display: flex;\n    flex-wrap: nowrap;\n    /* background: #FFF; */\n    padding: 0.5rem;\n    border-radius: 99999px;\n    height: 3rem;\n    line-height: 3rem;\n\n}\n\n.functions > span > span{\n    display: block;\n    /* padding: 0.5rem 1rem; */\n    border-radius: 50%;\n    /* background: #DDD; */\n    width: 36px;\n    height: 36px;\n    line-height: 36px;\n    margin: 0 4px;\n    transition: 0.2s;\n    cursor: pointer;\n    user-select: none;\n}\n\n\n.functions > span > span:hover, .functions > span > span.active{\n    background: rgb(255, 210, 50);\n}\n\n.functions > span > span > i{\n    line-height: 36px;\n}\n\n.functions .peopleButton{\n    position: relative;\n}\n\n.functions .peopleButton::before{\n    content: attr(data-num);\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 10;\n    font-size: 0.6rem;\n    display: block;\n    line-height: 1.6rem;\n}\n\n\n</style>","import script from \"./RoomView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RoomView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RoomView.vue?vue&type=style&index=0&id=c37be3c4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","_hoisted_3","script","__exports__","render","sidebar","ref","rowNum","colNum","changeSetting","console","log","value","emit","closeSideBar","classList","remove","inputElement","buttonContent","changeButtonContent","enterRoom","route","useRoute","store","useStore","tableData","rowName","colName","data","drawAuthSwitch","params","id","sideBarElement","roomOwnerId","peer","getters","getPeerjsObj","username","roomOwnerConnectBack","interval","ids","idAndNames","conns","haveFiled","onMounted","setInterval","clearInterval","sendMessage","type","JSON","stringify","tooltipTriggerList","slice","call","document","querySelectorAll","map","tooltipTriggerEl","el","onmouseenter","rect","getBoundingClientRect","createElement","className","style","left","bottom","innerHTML","dataset","tooltip","body","append","onmouseleave","enterName","val","undefined","conn2Peer","drawAuthSwitchChange","alert","draw","row","settingChanged","length","nowRowNum","j","push","tempArr","i","parse","nowColNum","dataChange","col","e","preventDefault","target","textContent","replace","d","targetUsername","includes","tempObj","conn","connect","on","allIdData","send","forEach","watch","drawUsername","parseInt"],"sourceRoot":""}